<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sacs Naruto - Sacs à Dos DZ (Catalogue Amélioré)</title>
  <style>
    :root {
      --primary: #0f1115;
      --secondary: #ff9f1c; /* orange Naruto */
      --bg-overlay: rgba(0, 0, 0, 0.75);
      --card: #171923;
      --muted: #a0aec0;
      --text: #f7fafc;
      --ring: 0 0 0 3px rgba(255, 159, 28, 0.35);
    }

    /* ======= Base ======= */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: url('images/naruto.jpeg') no-repeat center center / cover fixed;
    }

    /* Overlay to ensure readability over the background image */
    .overlay {
      background: linear-gradient(180deg, rgba(0,0,0,0.65), rgba(0,0,0,0.85));
      min-height: 100vh;
      padding: 16px;
    }

    /* ======= Layout ======= */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 20px;
    }

    header.site-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(20, 22, 30, 0.85);
      backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 14px 10px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 14px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo {
      width: 36px; height: 36px; border-radius: 8px;
      background: var(--secondary);
      display: grid; place-items: center; font-weight: 800; color: #111;
    }
    .brand h1 { font-size: 1.1rem; margin: 0; }

    .breadcrumbs { color: var(--muted); font-size: .9rem; }
    .breadcrumbs a { color: #fff; text-decoration: none; opacity: .9; }
    .breadcrumbs a:hover { text-decoration: underline; }

    .actions { display: flex; gap: 10px; align-items: center; }
    .back-btn, .cart-btn {
      padding: 10px 14px; border-radius: 999px; border: 1px solid rgba(255,255,255,.2);
      background: transparent; color: #fff; text-decoration: none; display: inline-flex; gap: 8px; align-items: center;
    }
    .back-btn:hover, .cart-btn:hover { background: rgba(255,255,255,.08); }

    /* ======= Sidebar Filters ======= */
    aside.filters {
      background: rgba(15, 17, 23, 0.85);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 16px;
      padding: 16px;
      height: fit-content;
      position: sticky; top: 86px;
    }
    .filters h2 { margin: 6px 0 12px; font-size: 1rem; opacity: .95; }
    .section { border-top: 1px dashed rgba(255,255,255,.12); padding-top: 12px; margin-top: 12px; }
    .section:first-of-type { border-top: 0; padding-top: 0; margin-top: 0; }

    .searchbar { display:flex; gap:8px; }
    .searchbar input {
      width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,.12);
      background: #10131a; color: #fff;
    }

    .chips { display: flex; flex-wrap: wrap; gap: 8px; }
    .chip {
      border: 1px solid rgba(255,255,255,.15); border-radius: 999px; padding: 6px 10px; font-size: .85rem; cursor: pointer;
      user-select: none; background: #0e121a;
    }
    .chip.active { border-color: var(--secondary); box-shadow: var(--ring); }

    .range-wrap { display:flex; align-items:center; gap:10px; }
    .range-wrap input[type=range] { width: 100%; }
    .range-value { font-variant-numeric: tabular-nums; color:#fff; padding:4px 8px; border-radius: 8px; background:#0f1320; }

    .sort-select { width:100%; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:#10131a; color:#fff; }

    /* ======= Catalog Grid ======= */
    main.catalog {
      background: rgba(15, 17, 23, 0.6);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 16px;
      padding: 16px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
      gap: 16px;
    }

    .card {
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 16px;
      overflow: hidden;
      transition: transform .25s ease, box-shadow .25s ease;
      position: relative;
      isolation: isolate;
    }
    .card:hover { transform: translateY(-4px); box-shadow: 0 10px 30px rgba(0,0,0,.35); }

    .badge { position:absolute; top:10px; left:10px; background: var(--secondary); color:#111; padding:6px 10px; border-radius:999px; font-weight:700; font-size:.75rem; }

    .thumb { aspect-ratio: 4/3; width:100%; object-fit: cover; display:block; }

    .card-body { padding: 12px; display:grid; gap: 6px; }
    .title { margin: 0; font-size: 1rem; line-height: 1.2; }
    .meta { font-size: .85rem; color: var(--muted); }
    .price { color: var(--secondary); font-weight: 800; letter-spacing:.3px; }

    .row { display:flex; gap: 8px; align-items: center; flex-wrap: wrap; }

    .btn {
      display:inline-flex; align-items:center; gap:8px; justify-content:center; text-decoration:none; cursor:pointer;
      border: 1px solid rgba(255,255,255,.15); color:#fff; background: #0f1320; padding: 8px 12px; border-radius: 10px; font-weight: 600;
    }
    .btn.primary { background: var(--secondary); border-color: transparent; color:#111; }
    .btn:hover { filter: brightness(1.08); }

    .empty { padding: 32px; text-align: center; color: var(--muted); }

    /* ======= Modal (Quick View & Guide) ======= */
    .modal {
      position: fixed; inset: 0; display: none; place-items: center; background: rgba(0,0,0,.65); z-index: 100;
      padding: 16px;
    }
    .modal.show { display:grid; }
    .dialog {
      width: min(920px, 96vw); background: #0f1118; border:1px solid rgba(255,255,255,.08); border-radius: 16px; overflow: hidden;
      display: grid; grid-template-columns: 1.2fr 1fr; min-height: 420px;
    }
    .dialog .media { background: #0b0d13; display:grid; place-items:center; }
    .dialog .media img { width:100%; height:100%; object-fit: cover; }
    .dialog .content { padding: 16px; display:grid; gap: 10px; }
    .dialog h3 { margin: 0; }
    .guide { background:#0b0f1a; border:1px solid rgba(255,255,255,.06); border-radius: 12px; padding: 10px; }

    .close-x { position:absolute; top: 10px; right: 10px; background: #0f1320; border:1px solid rgba(255,255,255,.15); width:36px; height:36px; border-radius: 10px; display:grid; place-items:center; cursor:pointer; }

    /* ======= Utilities ======= */
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; clip: rect(0, 0, 0, 0); overflow: hidden; border: 0; }

    /* ======= Responsive ======= */
    @media (max-width: 980px) {
      .container { grid-template-columns: 1fr; }
      aside.filters { position: static; order: 2; }
      main.catalog { order: 1; }
    }
    @media (max-width: 740px) {
      .header-inner { grid-template-columns: 1fr; gap: 8px; }
      .dialog { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
<div class="overlay">
  <!-- ======= HEADER ======= -->
  <header class="site-header" role="banner">
    <div class="header-inner">
      <div class="brand" aria-label="Sacs à Dos DZ">
        <div class="logo" aria-hidden="true">NRT</div>
        <div>
          <h1>Sacs inspirés de Naruto</h1>
          <nav class="breadcrumbs" aria-label="Fil d'Ariane">
            <a href="pc.html">Boutique</a> / <span>Naruto</span>
          </nav>
        </div>
      </div>
      <div></div>
      <div class="actions">
        <a class="back-btn" href="pc.html" aria-label="Retour à la boutique">&larr; Retour</a>
        <a class="cart-btn" href="#" aria-label="Voir le panier">Panier (0)</a>
      </div>
    </div>
  </header>

  <!-- ======= BODY GRID ======= -->
  <div class="container" role="main">
    <!-- ======= SIDEBAR FILTERS ======= -->
    <aside class="filters" aria-label="Filtres du catalogue">
      <h2>Filtrer & Trier</h2>

      <div class="section">
        <label for="search" class="sr-only">Rechercher</label>
        <div class="searchbar">
          <input id="search" type="search" placeholder="Rechercher un modèle, ex: Kakashi, Akatsuki" autocomplete="off" />
        </div>
      </div>

      <div class="section">
        <h3 style="margin:0 0 8px">Personnages / Thèmes</h3>
        <div class="chips" id="chipTags" aria-label="Choisir des thèmes">
          <span class="chip" data-tag="naruto">Naruto</span>
          <span class="chip" data-tag="sasuke">Sasuke</span>
          <span class="chip" data-tag="sakura">Sakura</span>
          <span class="chip" data-tag="kakashi">Kakashi</span>
          <span class="chip" data-tag="itachi">Itachi</span>
          <span class="chip" data-tag="akatsuki">Akatsuki</span>
          <span class="chip" data-tag="gaara">Gaara</span>
          <span class="chip" data-tag="minato">Minato</span>
          <span class="chip" data-tag="hokage">Hokage</span>
          <span class="chip" data-tag="logo">Logo</span>
        </div>
      </div>

      <div class="section">
        <h3 style="margin:0 0 8px">Budget (DA)</h3>
        <div class="range-wrap">
          <input id="priceRange" type="range" min="2400" max="4000" step="50" value="4000" />
          <span class="range-value" id="priceOut">≤ 4000</span>
        </div>
      </div>

      <div class="section">
        <h3 style="margin:0 0 8px">Trier par</h3>
        <select id="sort" class="sort-select" aria-label="Trier les résultats">
          <option value="pop">Recommandés</option>
          <option value="price-asc">Prix: du - cher au + cher</option>
          <option value="price-desc">Prix: du + cher au - cher</option>
          <option value="name">Nom (A→Z)</option>
        </select>
      </div>

      <div class="section">
        <h3 style="margin:0 0 8px">Guide rapide</h3>
        <p class="muted" style="margin:0 0 8px; color:var(--muted)">Besoin d'aide pour choisir ? Ouvrez un sac puis lisez les conseils.</p>
        <button class="btn" id="openGuide">Voir les conseils généraux</button>
      </div>
    </aside>

    <!-- ======= CATALOG ======= -->
    <main class="catalog" aria-live="polite">
      <div class="grid" id="grid">
        <!-- CARDS -->
        <article class="card" data-name="Naruto Uzumaki" data-price="3500" data-tags="naruto,hokage,logo,orange">
          <span class="badge">Populaire</span>
          <img class="thumb" loading="lazy" src="images/naruto1.jpg" alt="Sac à dos Naruto Uzumaki" />
          <div class="card-body">
            <h3 class="title">Modèle "Naruto Uzumaki"</h3>
            <div class="meta">Confort quotidien • 20L</div>
            <div class="row">
              <span class="price">3500 DA</span>
            </div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto1.jpg" data-title="Naruto Uzumaki" data-price="3500">Aperçu</button>
            </div>
          </div>
        </article>

        <article class="card" data-name="Sasuke Uchiha" data-price="3700" data-tags="sasuke,uchiha,akatsuki,logo">
          <img class="thumb" loading="lazy" src="images/naruto2.jpg" alt="Sac à dos Sasuke Uchiha" />
          <div class="card-body">
            <h3 class="title">Modèle "Sasuke Uchiha"</h3>
            <div class="meta">Renforcé • 22L</div>
            <div class="row"><span class="price">3700 DA</span></div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto2.jpg" data-title="Sasuke Uchiha" data-price="3700">Aperçu</button>
            </div>
          </div>
        </article>

        <article class="card" data-name="Sakura Haruno" data-price="3200" data-tags="sakura,medic,ninja,logo">
          <img class="thumb" loading="lazy" src="images/naruto3.jpg" alt="Sac à dos Sakura Haruno" />
          <div class="card-body">
            <h3 class="title">Modèle "Sakura Haruno"</h3>
            <div class="meta">Premium • 24L</div>
            <div class="row"><span class="price">3200 DA</span></div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto3.jpg" data-title="Sakura Haruno" data-price="3200">Aperçu</button>
            </div>
          </div>
        </article>

        <article class="card" data-name="Kakashi Hatake" data-price="3600" data-tags="kakashi,copy,jonin,logo">
          <img class="thumb" loading="lazy" src="images/naruto4.jpg" alt="Sac à dos Kakashi Hatake" />
          <div class="card-body">
            <h3 class="title">Modèle "Kakashi Hatake"</h3>
            <div class="meta">Léger • 18L</div>
            <div class="row"><span class="price">3600 DA</span></div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto4.jpg" data-title="Kakashi Hatake" data-price="3600">Aperçu</button>
            </div>
          </div>
        </article>

        <article class="card" data-name="Itachi Uchiha" data-price="3800" data-tags="itachi,uchiha,akatsuki,logo">
          <span class="badge">Nouvelle</span>
          <img class="thumb" loading="lazy" src="images/naruto5.jpg" alt="Sac à dos Itachi Uchiha" />
          <div class="card-body">
            <h3 class="title">Modèle "Itachi Uchiha"</h3>
            <div class="meta">Robuste • 23L</div>
            <div class="row"><span class="price">3800 DA</span></div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto5.jpg" data-title="Itachi Uchiha" data-price="3800">Aperçu</button>
            </div>
          </div>
        </article>

        <article class="card" data-name="Gaara du Désert" data-price="3300" data-tags="gaara,sable,kazekage,logo">
          <img class="thumb" loading="lazy" src="images/naruto6.jpg" alt="Sac à dos Gaara du Désert" />
          <div class="card-body">
            <h3 class="title">Modèle "Gaara du Désert"</h3>
            <div class="meta">Étudiant • 20L</div>
            <div class="row"><span class="price">3300 DA</span></div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto6.jpg" data-title="Gaara du Désert" data-price="3300">Aperçu</button>
            </div>
          </div>
        </article>

        <article class="card" data-name="Akatsuki Rouge" data-price="3900" data-tags="akatsuki,nuages,rouge,logo">
          <img class="thumb" loading="lazy" src="images/naruto7.jpg" alt="Sac à dos Akatsuki Rouge" />
          <div class="card-body">
            <h3 class="title">Modèle "Akatsuki Rouge"</h3>
            <div class="meta">Confort • 19L</div>
            <div class="row"><span class="price">3900 DA</span></div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto7.jpg" data-title="Akatsuki Rouge" data-price="3900">Aperçu</button>
            </div>
          </div>
        </article>

        <article class="card" data-name="Minato Namikaze" data-price="3750" data-tags="minato,hokage,jaune,logo">
          <img class="thumb" loading="lazy" src="images/naruto8.jpg" alt="Sac à dos Minato Namikaze" />
          <div class="card-body">
            <h3 class="title">Modèle "Minato Namikaze"</h3>
            <div class="meta">Édition • 24L</div>
            <div class="row"><span class="price">3750 DA</span></div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto8.jpg" data-title="Minato Namikaze" data-price="3750">Aperçu</button>
            </div>
          </div>
        </article>

        <article class="card" data-name="Logo Konoha Classique" data-price="3000" data-tags="logo,konoha,classique,minimal">
          <img class="thumb" loading="lazy" src="images/naruto9.jpg" alt="Sac à dos Logo Konoha Classique" />
          <div class="card-body">
            <h3 class="title">Modèle "Logo Konoha Classique"</h3>
            <div class="meta">Essentiel • 18L</div>
            <div class="row"><span class="price">3000 DA</span></div>
            <div class="row">
              <a class="btn primary" href="https://m.me/tonpage">Commander</a>
              <button class="btn quick" data-img="images/naruto9.jpg" data-title="Logo Konoha Classique" data-price="3000">Aperçu</button>
            </div>
          </div>
        </article>
      </div>
      <div id="empty" class="empty" hidden>Aucun résultat. Essayez d'autres filtres.</div>
      <div style="text-align:center; margin-top:16px">
        <a class="back-btn" href="pc.html">&larr; Retour à la Boutique</a>
      </div>
    </main>
  </div>

  <!-- ======= MODAL ======= -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="close-x" id="closeModal" aria-label="Fermer">✕</button>
      <div class="media"><img id="modalImg" src="" alt="Aperçu du sac" /></div>
      <div class="content">
        <h3 id="modalTitle">Titre</h3>
        <div id="modalPrice" class="price">—</div>
        <div class="guide">
          <strong>Conseils pour bien choisir</strong>
          <ul style="margin:8px 0 0 18px; line-height:1.5">
            <li><b>Volume</b> : 18–20L pour l'école/quotidien, 22–24L pour plus de charge.</li>
            <li><b>Confort</b> : bretelles rembourrées et dos respirant pour longues journées.</li>
            <li><b>Organisation</b> : poche PC 14–15", poches rapides (clé, carte, câble).</li>
            <li><b>Matière</b> : tissu déperlant si vous sortez souvent.</li>
            <li><b>Style</b> : choisissez le personnage qui vous motive (Kakashi pour la classe, Naruto pour l'énergie, Akatsuki pour l'audace).</li>
          </ul>
        </div>
        <div class="row" style="margin-top:10px">
          <a class="btn primary" href="https://m.me/tonpage">Commander ce modèle</a>
          <button class="btn" id="close2">Fermer</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // ======= Helpers =======
  const $ = (sel, root=document) => root.querySelector(sel);
  const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

  const state = {
    term: '',
    tags: new Set(),
    maxPrice: 4000,
    sort: 'pop'
  };

  const grid = $('#grid');
  const cards = $$('.card', grid);
  const empty = $('#empty');
  const priceRange = $('#priceRange');
  const priceOut = $('#priceOut');
  const search = $('#search');
  const sort = $('#sort');

  // ======= Filter Logic =======
  function applyFilters() {
    let visible = 0;
    const term = state.term.toLowerCase().trim();

    const items = cards.map(card => ({
      el: card,
      name: (card.dataset.name || '').toLowerCase(),
      price: Number(card.dataset.price || '0'),
      tags: (card.dataset.tags || '').split(',').map(s => s.trim().toLowerCase())
    }));

    // filter
    items.forEach(item => {
      const matchTerm = !term || item.name.includes(term) || item.tags.some(t => t.includes(term));
      const matchPrice = item.price <= state.maxPrice;
      const matchTag = state.tags.size === 0 || [...state.tags].every(t => item.tags.includes(t));
      const show = matchTerm && matchPrice && matchTag;
      item.el.style.display = show ? '' : 'none';
      if (show) visible++;
    });

    // sort
    const visibleCards = items.filter(i => i.el.style.display !== 'none');
    switch (state.sort) {
      case 'price-asc':
        visibleCards.sort((a,b) => a.price - b.price); break;
      case 'price-desc':
        visibleCards.sort((a,b) => b.price - a.price); break;
      case 'name':
        visibleCards.sort((a,b) => a.name.localeCompare(b.name)); break;
      default:
        // 'pop' keep DOM order
        visibleCards.sort((a,b) => cards.indexOf(a.el) - cards.indexOf(b.el));
    }

    // re-append in sorted order
    visibleCards.forEach(i => grid.appendChild(i.el));

    empty.hidden = visible !== 0;
  }

  // ======= Events =======
  priceRange.addEventListener('input', () => {
    state.maxPrice = Number(priceRange.value);
    priceOut.textContent = '\u2264 ' + state.maxPrice;
    applyFilters();
  });

  search.addEventListener('input', () => {
    state.term = search.value;
    applyFilters();
  });

  sort.addEventListener('change', () => {
    state.sort = sort.value;
    applyFilters();
  });

  // chip tags (toggle)
  $$('#chipTags .chip').forEach(chip => {
    chip.addEventListener('click', () => {
      const tag = (chip.dataset.tag || '').toLowerCase();
      if (chip.classList.contains('active')) {
        chip.classList.remove('active');
        state.tags.delete(tag);
      } else {
        chip.classList.add('active');
        state.tags.add(tag);
      }
      applyFilters();
    });
  });

  // ======= Modal (Quick View) =======
  const modal = $('#modal');
  const modalImg = $('#modalImg');
  const modalTitle = $('#modalTitle');
  const modalPrice = $('#modalPrice');
  const closeModal = $('#closeModal');
  const close2 = $('#close2');

  function openModal({img, title, price}) {
    modalImg.src = img;
    modalTitle.textContent = title;
    modalPrice.textContent = price + ' DA';
    modal.classList.add('show');
    modal.setAttribute('aria-hidden', 'false');
  }
  function hideModal() {
    modal.classList.remove('show');
    modal.setAttribute('aria-hidden', 'true');
  }

  $$('.quick').forEach(btn => {
    btn.addEventListener('click', () => {
      const data = {
        img: btn.dataset.img,
        title: btn.dataset.title,
        price: btn.dataset.price
      };
      openModal(data);
    });
  });

  closeModal.addEventListener('click', hideModal);
  close2.addEventListener('click', hideModal);
  modal.addEventListener('click', (e) => { if (e.target === modal) hideModal(); });
  window.addEventListener('keydown', (e) => { if (e.key === 'Escape') hideModal(); });

  // Open general guide without product
  $('#openGuide').addEventListener('click', () => {
    openModal({ img: 'images/naruto1.jpg', title: 'Guide d\'achat Naruto', price: '—' });
  });

  // ======= Init =======
  applyFilters();
</script>
</body>
</html>
